<!DOCTYPE html>
<html lang='en'>
<head>
  <meta charset='utf-8'>
  <meta http-equiv='X-UA-Compatible' content='IE=edge'>
  <meta name='viewport' content='width=device-width, initial-scale=1'>
  <title>Cicada User Settings</title>
  <script src='/js/web-push.js' type="module"></script>
  <script src='/js/htmx.min.js' crossorigin='anonymous'></script>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
  <link rel='stylesheet' href='https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css'>
</head>

<body>
<script src="/js/checkLoggedIn.js"></script>
<div class='container' id='toplevel'>
  <h1 class="display-3 mt-4">User Settings</h1>
  <h2>Web Push Settings</h2>
  <div class="form-check form-switch">
    <input id="subscribeToggle" class="form-check-input" type="checkbox" role="switch" disabled>
    <label class="form-check-label" for="subscribeToggle">Subscribe for web push notifications on this
      device</label>
  </div>
  <p id='status' class='lead'>Finding Web Push Status...</p>
  <hr />
  <h2>Visibility and Notifications</h2>
  <script src="/js/checkForHtmxUnauthorizedResponse.js"></script>
  <div id="topUserSettings"
       hx-get='/app/fragment/userSettings'
       hx-trigger='load'
       hx-swap='innerHTML'>Finding user settings...
  </div>
  <hr/>
  <h2>Advanced</h2>
    <button type="button"
            class="btn btn-danger"
            hx-post="/app/fragment/resetUserSettings"
            hx-trigger="click"
            hx-target="#topUserSettings"
            hx-swap="innerHTML"
    >
      Reset User Settings
    </button>
    <button type="button"
            id="pingButton"
            class="btn btn-primary"
    >
      Test push notifications</button>
    <button type="button" class="btn btn-secondary" id='updateServiceWorker' disabled>Update Service Worker</button>
  <hr />
  <p>
    <a href="/">Back to home</a>
  </p>
</div>
</body>
</html>